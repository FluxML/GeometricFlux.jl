<!DOCTYPE html><HTML lang="en"><head><script charset="utf-8" src="../../../../../../../../../../../../../../../../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../../../../../../../../../../../../../../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../../../../../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../../../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../../../../../../../../../../../../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../../../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../../../../../../../../../../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../../../../../../../../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><script charset="utf-8" src="../../../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../assets/__default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../assets/__default/flexsearch_integration.js" type="text/javascript"></script><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Graph network block · GeometricFlux.jl</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-M61P0B2Y8E"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-M61P0B2Y8E', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner="" src="../../assets/warner.js"></script><link href="https://fluxml.ai/GeometricFlux.jl/stable/abstractions/gn/" rel="canonical"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script data-main="../../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" data-theme-name="documenter-dark" data-theme-primary-dark="" href="../../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../../assets/themeswap.js"></script><link href="../../assets/flux.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../democards/gridtheme.css" rel="stylesheet" type="text/css"/><link href="../../../../assets/__default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../assets/__default/flexsearch.css" rel="stylesheet" type="text/css"/><link href="../../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../../../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../../../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../../../../../../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../../../../../../../../../../../../../../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../../../../../../../../../../../../../../../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../../../../../../../../../../../../../../../../../graphsignals/stable/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../../../../../../../../../../../../../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../../../../../../../../../../../../../../../graphsignals/stable/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../../../../../../../../../../../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../../../../../../../../../../../../../graphsignals/stable/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../../../../../../../../../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../../../../../../../../../../../graphsignals/stable/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../../../../../../../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../../../../../../../../../graphsignals/stable/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding"></div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../../../../../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../../../../../../../graphsignals/stable/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding"></div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../../../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../../../../../graphsignals/stable/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding"></div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../../../graphsignals/stable/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding"></div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link active nav-item" href="../../../">GeometricFlux</a><a class="nav-link nav-item" href="../../../../graphsignals/">GraphSignals</a><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><a id="multidoc-toggler"></a></nav><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img alt="GeometricFlux.jl logo" src="../../assets/logo.svg"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">GeometricFlux.jl</a></span></div><form action="../../search/" class="docs-search"><input class="docs-search-query" id="documenter-search-query" name="q" placeholder="Search docs" type="text"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../tutorials/">Tutorials</a></li><li><a class="tocitem" href="../../introduction/">Introduction</a></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../../basics/conv/">Graph Convolutions</a></li><li><a class="tocitem" href="../../basics/passgraph/">Graph Passing</a></li><li><a class="tocitem" href="../../basics/layers/">Building Layers</a></li><li><a class="tocitem" href="../../basics/subgraph/">Subgraph</a></li><li><a class="tocitem" href="../../basics/neighborhood_graph/">Neighborhood graphs</a></li><li><a class="tocitem" href="../../basics/random_graph/">Random graphs</a></li><li><a class="tocitem" href="../../basics/batch/">Batch Learning</a></li></ul></li><li><a class="tocitem" href="../../cooperate/">Cooperate with Flux Layers</a></li><li><span class="tocitem">Abstractions</span><ul><li><a class="tocitem" href="../msgpass/">Message passing scheme</a></li><li class="is-active"><a class="tocitem" href="">Graph network block</a><ul class="internal"><li><a class="tocitem" href="#Update-functions"><span>Update functions</span></a></li><li><a class="tocitem" href="#Aggregate-functions"><span>Aggregate functions</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../dynamicgraph/">Dynamic Graph Update</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/featuredgraph/">FeaturedGraph</a></li><li><a class="tocitem" href="../../manual/graph_conv/">Graph Convolutional Layers</a></li><li><a class="tocitem" href="../../manual/pool/">Graph Pooling Layers</a></li><li><a class="tocitem" href="../../manual/group_conv/">Group Convolutional Layers</a></li><li><a class="tocitem" href="../../manual/positional/">Positional Encoding Layers</a></li><li><a class="tocitem" href="../../manual/embedding/">Embeddings</a></li><li><a class="tocitem" href="../../manual/models/">Models</a></li><li><a class="tocitem" href="../../manual/linalg/">Linear Algebra</a></li><li><a class="tocitem" href="../../manual/neighborhood_graph/">Neighborhood graphs</a></li></ul></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Abstractions</a></li><li class="is-active"><a href="">Graph network block</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Graph network block</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/FluxML/GeometricFlux.jl/blob/master/docs/src/abstractions/gn.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a></div></header><article class="content" id="documenter-page"><h1 id="Graph-network-block"><a class="docs-heading-anchor" href="#Graph-network-block">Graph network block</a><a id="Graph-network-block-1"></a><a class="docs-heading-anchor-permalink" href="#Graph-network-block" title="Permalink"></a></h1><p>Graph network (GN) is a more generic model for graph neural network. For details, a graph network block is defined as follow:</p><p class="math-container">\[\begin{aligned}
    e_{ij}^{\prime} &amp;= \phi^{e}(e_{ij}, v_i, v_j, u) \\
    v_{i}^{\prime} &amp;= \phi^{v}(\bar{e}_{i}^{\prime}, v_i, u) \\
    u^{\prime} &amp;= \phi^{u}(\bar{e}^{\prime}, \bar{v}^{\prime}, u)
\end{aligned}
\ \ \ \ 
\begin{aligned}
    \bar{e}_{i}^{\prime} &amp;= \rho^{e \rightarrow v}(E_i^{\prime}) \\
    \bar{e}^{\prime} &amp;= \rho^{e \rightarrow u}(E^{\prime}) \\
    \bar{v}^{\prime} &amp;= \rho^{v \rightarrow u}(V^{\prime})
\end{aligned}\]</p><p>where <span>$\phi$</span> and <span>$\rho$</span> denote update functions and aggregate functions, respectively. <span>$v_i$</span> and <span>$v_j$</span> are node features from node <span>$i$</span> and its neighbor node <span>$j$</span>, <span>$e_{ij}$</span> is edge feature for edge <span>$(i, j)$</span>, and <span>$u$</span> is global feature for whole graph. <span>$e_{ij}^{\prime}$</span>, <span>$v_{i}^{\prime}$</span> and <span>$u^{\prime}$</span> are new features for edge, node and global. <span>$\bar{e}_{i}^{\prime}$</span>, <span>$\bar{e}^{\prime}$</span> and <span>$\bar{v}^{\prime}$</span> are aggregated new features for edge, node and global.</p><blockquote><p>Reference: <a href="../../references/#Battaglia2018">Peter W. Battaglia, Jessica B. Hamrick, Victor Bapst, Alvaro Sanchez-Gonzalez, Vinicius Zambaldi, Mateusz Malinowski, Andrea Tacchetti, David Raposo, Adam Santoro, Ryan Faulkner, Caglar Gulcehre, Francis Song, Andrew Ballard, Justin Gilmer, George Dahl, Ashish Vaswani, Kelsey Allen, Charles Nash, Victoria Langston, Chris Dyer, Nicolas Heess, Daan Wierstra, Pushmeet Kohli, Matt Botvinick, Oriol Vinyals, Yujia Li, Razvan Pascanu (2018)</a></p></blockquote><p>Ingraph network, it describes an update order: edge, node and then global. There are three corresponding update functions for edge, node and then global, respectively. Three update functions return their default values as follow:</p><pre><code class="nohighlight hljs">update_edge(gn, e, vi, vj, u) = e
update_vertex(gn, ē, vi, u) = vi
update_global(gn, ē, v̄, u) = u</code></pre><p>Information propagation between different levels are achieved by aggregate functions. Three aggregate functions <code>aggregate_neighbors</code>, <code>aggregate_edges</code> and <code>aggregate_vertices</code> are defined to aggregate states.</p><p>GN block is realized into a abstract type <code>GraphNet</code>. User can make a subtype of <code>GraphNet</code> to customize GN block. Thus, a GN block is defined as a layer in GNN. <code>MessagePassing</code> is a subtype of <code>GraphNet</code>.</p><h2 id="Update-functions"><a class="docs-heading-anchor" href="#Update-functions">Update functions</a><a id="Update-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Update-functions" title="Permalink"></a></h2><p><code>update_edge</code> acts as the first update function to apply to edge states. It takes edge state <code>e</code>, node <code>i</code> state <code>vi</code>, node <code>j</code> state <code>vj</code> and global state <code>u</code>. It is expected to return a feature vector for new edge state. <code>update_vertex</code> updates nodes state by taking aggregated edge state <code>ē</code>, node <code>i</code> state <code>vi</code> and global state <code>u</code>. It is expected to return a feature vector for new node state. <code>update_global</code> updates global state with aggregated information from edge and node. It takes aggregated edge state <code>ē</code>, aggregated node state <code>v̄</code> and global state <code>u</code>. It is expected to return a feature vector for new global state. User can define their own behavior by overriding update functions.</p><article class="docstring"><header><a class="docstring-binding" href="#GeometricFlux.update_edge" id="GeometricFlux.update_edge"><code>GeometricFlux.update_edge</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_edge(gn, e, vi, vj, u)</code></pre><p>Update function for edge feature in graph network.</p><p><strong>Arguments</strong></p><ul><li><code>gn::GraphNet</code>: A graph network layer.</li><li><code>e</code>: Edge feature.</li><li><code>vi</code>: Node feature for node <code>i</code>.</li><li><code>vj</code>: Node feature for neighbors of node <code>i</code>.</li><li><code>u</code>: Global feature.</li></ul><p>See also <a href="#GeometricFlux.update_vertex"><code>update_vertex</code></a>, <a href="#GeometricFlux.update_global"><code>update_global</code></a>, <a href="#GeometricFlux.update_batch_edge"><code>update_batch_edge</code></a>, <a href="#GeometricFlux.update_batch_vertex"><code>update_batch_vertex</code></a>, <a href="#GeometricFlux.aggregate_neighbors"><code>aggregate_neighbors</code></a>, <a href="#GeometricFlux.aggregate_edges"><code>aggregate_edges</code></a>, <a href="#GeometricFlux.aggregate_vertices"><code>aggregate_vertices</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/FluxML/GeometricFlux.jl/blob/97972ebaab0a4230df2edf4eaee310bc536db99b/src/layers/gn.jl#L3-L19" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#GeometricFlux.update_vertex" id="GeometricFlux.update_vertex"><code>GeometricFlux.update_vertex</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_vertex(gn, ē, vi, u)</code></pre><p>Update function for node feature in graph network.</p><p><strong>Arguments</strong></p><ul><li><code>gn::GraphNet</code>: A graph network layer.</li><li><code>ē</code>: Aggregated edge feature.</li><li><code>vi</code>: Node feature for node <code>i</code>.</li><li><code>u</code>: Global feature.</li></ul><p>See also <a href="#GeometricFlux.update_edge"><code>update_edge</code></a>, <a href="#GeometricFlux.update_global"><code>update_global</code></a>, <a href="#GeometricFlux.update_batch_edge"><code>update_batch_edge</code></a>, <a href="#GeometricFlux.update_batch_vertex"><code>update_batch_vertex</code></a>, <a href="#GeometricFlux.aggregate_neighbors"><code>aggregate_neighbors</code></a>, <a href="#GeometricFlux.aggregate_edges"><code>aggregate_edges</code></a>, <a href="#GeometricFlux.aggregate_vertices"><code>aggregate_vertices</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/FluxML/GeometricFlux.jl/blob/97972ebaab0a4230df2edf4eaee310bc536db99b/src/layers/gn.jl#L22-L37" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#GeometricFlux.update_global" id="GeometricFlux.update_global"><code>GeometricFlux.update_global</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_global(gn, ē, v̄, u)</code></pre><p>Update function for global feature in graph network.</p><p><strong>Arguments</strong></p><ul><li><code>gn::GraphNet</code>: A graph network layer.</li><li><code>ē</code>: Aggregated edge feature.</li><li><code>v̄</code>: Aggregated node feature for node <code>i</code>.</li><li><code>u</code>: Global feature.</li></ul><p>See also <a href="#GeometricFlux.update_edge"><code>update_edge</code></a>, <a href="#GeometricFlux.update_vertex"><code>update_vertex</code></a>, <a href="#GeometricFlux.update_batch_edge"><code>update_batch_edge</code></a>, <a href="#GeometricFlux.update_batch_vertex"><code>update_batch_vertex</code></a>, <a href="#GeometricFlux.aggregate_neighbors"><code>aggregate_neighbors</code></a>, <a href="#GeometricFlux.aggregate_edges"><code>aggregate_edges</code></a>, <a href="#GeometricFlux.aggregate_vertices"><code>aggregate_vertices</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/FluxML/GeometricFlux.jl/blob/97972ebaab0a4230df2edf4eaee310bc536db99b/src/layers/gn.jl#L40-L55" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#GeometricFlux.update_batch_edge" id="GeometricFlux.update_batch_edge"><code>GeometricFlux.update_batch_edge</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_batch_edge(gn, el, E, V, u)</code></pre><p>Returns new edge features of size <code>(E_out_dim, #E, [batch_size])</code>.</p><p><strong>Arguments</strong></p><ul><li><code>gn::GraphNet</code>: A graph network layer.</li><li><code>el::NamedTuple</code>: Collection of graph information.</li><li><code>E</code>: All edge features. Its size should be <code>(E_in_dim, #E, [batch_size])</code>.</li><li><code>V</code>: All node features.</li><li><code>u</code>: Global features.</li></ul><p>See also <a href="#GeometricFlux.update_edge"><code>update_edge</code></a>, <a href="#GeometricFlux.update_vertex"><code>update_vertex</code></a>, <a href="#GeometricFlux.update_global"><code>update_global</code></a>, <a href="#GeometricFlux.update_batch_vertex"><code>update_batch_vertex</code></a>, <a href="#GeometricFlux.aggregate_neighbors"><code>aggregate_neighbors</code></a>, <a href="#GeometricFlux.aggregate_edges"><code>aggregate_edges</code></a>, <a href="#GeometricFlux.aggregate_vertices"><code>aggregate_vertices</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/FluxML/GeometricFlux.jl/blob/97972ebaab0a4230df2edf4eaee310bc536db99b/src/layers/gn.jl#L58-L74" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#GeometricFlux.update_batch_vertex" id="GeometricFlux.update_batch_vertex"><code>GeometricFlux.update_batch_vertex</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_batch_vertex(gn, el, Ē, V, u)</code></pre><p>Returns new node features of size <code>(V_out_dim, #V, [batch_size])</code>.</p><p><strong>Arguments</strong></p><ul><li><code>gn::GraphNet</code>: A graph network layer.</li><li><code>el::NamedTuple</code>: Collection of graph information.</li><li><code>Ē</code>: All edge features. Its size should be <code>(E_in_dim, #V, [batch_size])</code>.</li><li><code>V</code>: All node features. Its size should be <code>(V_in_dim, #V, [batch_size])</code>.</li><li><code>u</code>: Global features.</li></ul><p>See also <a href="#GeometricFlux.update_edge"><code>update_edge</code></a>, <a href="#GeometricFlux.update_vertex"><code>update_vertex</code></a>, <a href="#GeometricFlux.update_global"><code>update_global</code></a>, <a href="#GeometricFlux.update_batch_edge"><code>update_batch_edge</code></a>, <a href="#GeometricFlux.aggregate_neighbors"><code>aggregate_neighbors</code></a>, <a href="#GeometricFlux.aggregate_edges"><code>aggregate_edges</code></a>, <a href="#GeometricFlux.aggregate_vertices"><code>aggregate_vertices</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/FluxML/GeometricFlux.jl/blob/97972ebaab0a4230df2edf4eaee310bc536db99b/src/layers/gn.jl#L84-L100" target="_blank">source</a></section></article><h2 id="Aggregate-functions"><a class="docs-heading-anchor" href="#Aggregate-functions">Aggregate functions</a><a id="Aggregate-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Aggregate-functions" title="Permalink"></a></h2><p>An aggregate function <code>aggregate_neighbors</code> aggregates edge states for edges incident to some node <code>i</code> into node-level information. Aggregate function <code>aggregate_edges</code> aggregates all edge states into global-level information. The last aggregate function <code>aggregate_vertices</code> aggregates all vertex states into global-level information.</p><article class="docstring"><header><a class="docstring-binding" href="#GeometricFlux.aggregate_neighbors" id="GeometricFlux.aggregate_neighbors"><code>GeometricFlux.aggregate_neighbors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">aggregate_neighbors(gn, el, aggr, E)</code></pre><p>Returns aggregated neighbor features of size <code>(E_out_dim, #V, [batch_size])</code>.</p><p><strong>Arguments</strong></p><ul><li><code>gn::GraphNet</code>: A graph network layer.</li><li><code>el::NamedTuple</code>: Collection of graph information.</li><li><code>aggr</code>: Aggregate function to apply on neighbor features.</li><li><code>E</code>: All edge features from neighbors. Its size should be <code>(E_out_dim, #E, [batch_size])</code>.</li></ul><p>See also <a href="#GeometricFlux.update_edge"><code>update_edge</code></a>, <a href="#GeometricFlux.update_vertex"><code>update_vertex</code></a>, <a href="#GeometricFlux.update_global"><code>update_global</code></a>, <a href="#GeometricFlux.update_batch_edge"><code>update_batch_edge</code></a>, <a href="#GeometricFlux.update_batch_vertex"><code>update_batch_vertex</code></a>, <a href="#GeometricFlux.aggregate_edges"><code>aggregate_edges</code></a>, <a href="#GeometricFlux.aggregate_vertices"><code>aggregate_vertices</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/FluxML/GeometricFlux.jl/blob/97972ebaab0a4230df2edf4eaee310bc536db99b/src/layers/gn.jl#L103-L118" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#GeometricFlux.aggregate_edges" id="GeometricFlux.aggregate_edges"><code>GeometricFlux.aggregate_edges</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">aggregate_edges(gn, aggr, E)</code></pre><p>Returns aggregated edge features of size <code>(E_out_dim, 1, [batch_size])</code> for updating global feature.</p><p><strong>Arguments</strong></p><ul><li><code>gn::GraphNet</code>: A graph network layer.</li><li><code>aggr</code>: Aggregate function to apply on edge features.</li><li><code>E</code>: All edge features. Its size should be <code>(E_out_dim, #E, [batch_size])</code>.</li></ul><p>See also <a href="#GeometricFlux.update_edge"><code>update_edge</code></a>, <a href="#GeometricFlux.update_vertex"><code>update_vertex</code></a>, <a href="#GeometricFlux.update_global"><code>update_global</code></a>, <a href="#GeometricFlux.update_batch_edge"><code>update_batch_edge</code></a>, <a href="#GeometricFlux.update_batch_vertex"><code>update_batch_vertex</code></a>, <a href="#GeometricFlux.aggregate_neighbors"><code>aggregate_neighbors</code></a>, <a href="#GeometricFlux.aggregate_vertices"><code>aggregate_vertices</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/FluxML/GeometricFlux.jl/blob/97972ebaab0a4230df2edf4eaee310bc536db99b/src/layers/gn.jl#L131-L145" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#GeometricFlux.aggregate_vertices" id="GeometricFlux.aggregate_vertices"><code>GeometricFlux.aggregate_vertices</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">aggregate_vertices(gn, aggr, V)</code></pre><p>Returns aggregated node features of size <code>(V_out_dim, 1, [batch_size])</code> for updating global feature.</p><p><strong>Arguments</strong></p><ul><li><code>gn::GraphNet</code>: A graph network layer.</li><li><code>aggr</code>: Aggregate function to apply on node features.</li><li><code>V</code>: All node features. Its size should be <code>(V_out_dim, #V, [batch_size])</code>.</li></ul><p>See also <a href="#GeometricFlux.update_edge"><code>update_edge</code></a>, <a href="#GeometricFlux.update_vertex"><code>update_vertex</code></a>, <a href="#GeometricFlux.update_global"><code>update_global</code></a>, <a href="#GeometricFlux.update_batch_edge"><code>update_batch_edge</code></a>, <a href="#GeometricFlux.update_batch_vertex"><code>update_batch_vertex</code></a>, <a href="#GeometricFlux.aggregate_neighbors"><code>aggregate_neighbors</code></a>, <a href="#GeometricFlux.aggregate_edges"><code>aggregate_edges</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/FluxML/GeometricFlux.jl/blob/97972ebaab0a4230df2edf4eaee310bc536db99b/src/layers/gn.jl#L149-L163" target="_blank">source</a></section></article><p>It is available for assigning aggregate function by assigning aggregate operations to <code>propagate</code> function.</p><pre><code class="nohighlight hljs">propagate(gn, fg::FeaturedGraph, naggr=nothing, eaggr=nothing, vaggr=nothing)</code></pre><p><code>naggr</code>, <code>eaggr</code> and <code>vaggr</code> are arguments for <code>aggregate_neighbors</code>, <code>aggregate_edges</code> and <code>aggregate_vertices</code>, respectively. Available aggregate functions are assigned by following symbols to them: <code>:add</code>, <code>:sub</code>, <code>:mul</code>, <code>:div</code>, <code>:max</code>, <code>:min</code> and <code>:mean</code>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../msgpass/">« Message passing scheme</a><a class="docs-footer-nextpage" href="../../dynamicgraph/">Dynamic Graph Update »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 28 September 2022 06:17">Wednesday 28 September 2022</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>